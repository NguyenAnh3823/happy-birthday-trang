<!doctype html>
<html lang="vi" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Birthday Trang üéÇ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800&amp;family=Caveat:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      font-family: 'Baloo 2', cursive, sans-serif;
    }
    
    .page {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease-in-out;
    }
    
    .page.active {
      opacity: 1;
      pointer-events: auto;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes heartFloat {
      0% { 
        transform: translateY(0) translateX(0) scale(1); 
        opacity: 1; 
      }
      100% { 
        transform: translateY(-120px) translateX(var(--drift)) scale(0.3); 
        opacity: 0; 
      }
    }
    
    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    @keyframes popIn {
      0% { opacity: 0; transform: scale(0.8); }
      70% { transform: scale(1.05); }
      100% { opacity: 1; transform: scale(1); }
    }
    
    .float-animation {
      animation: float 3s ease-in-out infinite;
    }
    
    .bounce-animation {
      animation: bounce 2s ease-in-out infinite;
    }
    
    .pop-in {
      animation: popIn 0.5s ease-out forwards;
    }
    
    .heart-particle {
      position: absolute;
      animation: heartFloat 4s ease-out forwards;
      pointer-events: none;
    }
    
    .card-wrapper {
      background: linear-gradient(145deg, #fffef9, #faf6f0);
      border: 3px solid #c48b8b;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(196, 139, 139, 0.25);
      max-width: 420px;
      width: 92%;
      max-height: 90%;
      overflow-y: auto;
      overflow-x: hidden;
    }
    
    .title-bar {
      background: linear-gradient(90deg, #f5c4ca 0%, #f8d5da 35%, #fce8eb 70%, #fffef9 100%);
      padding: 12px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #c48b8b;
      border-radius: 17px 17px 0 0;
    }
    
    .content-box {
      border: 2.5px solid #c48b8b;
      border-radius: 16px;
      background: #fffef9;
      padding: 16px;
    }
    
    .note-layer {
      position: relative;
      border: 2.5px solid #c48b8b;
      border-radius: 14px;
      background: #ffffff;
      padding: 14px;
      overflow: hidden;
    }
    
    .note-bg {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
    }
    
    .note-text {
      position: relative;
      z-index: 1;
    }
    
    .pill-btn {
      background: linear-gradient(135deg, #f8b8c2, #f0a0ad);
      border: none;
      border-radius: 25px;
      padding: 10px 20px;
      font-size: 14px;
      font-weight: 600;
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(240, 160, 173, 0.35);
    }
    
    .pill-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(240, 160, 173, 0.5);
    }
    
    .main-btn {
      background: linear-gradient(135deg, #f8b8c2, #f0a0ad);
      color: white;
      border: none;
      border-radius: 25px;
      padding: 12px 28px;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(240, 160, 173, 0.4);
    }
    
    .main-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(240, 160, 173, 0.55);
    }
    
    .back-btn {
      background: #ffffff;
      color: #f8a4b8;
      border: 2px solid #f8a4b8;
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .back-btn:hover {
      background: #fff5f8;
    }
    
    .photo-frame {
      background: #fffef9;
      border: 3px solid #c48b8b;
      border-radius: 12px;
      padding: 8px;
      box-shadow: 0 4px 12px rgba(196, 139, 139, 0.25);
    }
    
    .photo-frame img {
      border-radius: 8px;
    }
    
    .divider-placeholder {
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    
    .cassette-container {
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    
    .cassette-container:hover {
      transform: scale(1.03);
    }
    
    .mini-gift-box {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin: auto;
      z-index: 100;
      background: #fffef9;
      border: 3px solid #c48b8b;
      border-radius: 20px;
      padding: 24px;
      box-shadow: 0 12px 40px rgba(196, 139, 139, 0.4);
      text-align: center;
      max-width: 320px;
      width: 85%;
      height: fit-content;
      max-height: 90%;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    
    .mini-gift-box.show {
      opacity: 1;
      visibility: visible;
      animation: popIn 0.4s ease-out forwards;
    }
    
    .mini-gift-overlay {
      position: fixed;
      inset: 0;
      background: rgba(196, 139, 139, 0.3);
      z-index: 99;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    
    .mini-gift-overlay.show {
      opacity: 1;
      pointer-events: auto;
    }
    
    .text-primary {
      color: #e8a0aa;
    }

    .card-wrapper::-webkit-scrollbar {
      width: 6px;
    }
    
    .card-wrapper::-webkit-scrollbar-track {
      background: #faf6f0;
      border-radius: 3px;
    }
    
    .card-wrapper::-webkit-scrollbar-thumb {
      background: #c48b8b;
      border-radius: 3px;
    }
    
    /* Image styling */
    .title-img {
      height: 32px;
      width: auto;
      object-fit: contain;
    }
    
    .icon-img {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      object-fit: cover;
    }
    
    .main-gif {
      width: 100%;
      height: 176px;
      object-fit: contain;
      border-radius: 12px;
    }
    
    .cat-gif {
      width: 112px;
      height: 144px;
      object-fit: contain;
      border-radius: 12px;
    }
    
    .header-img {
      width: 100%;
      height: 128px;
      object-fit: contain;
      border-radius: 12px;
    }
    
    .illustration-img {
      width: 35%;
      height: 35px;
      object-fit: contain;
      border-radius: 12px;
    }
    
    .photo-img {
      width: 128px;
      height: 160px;
      object-fit: cover;
      border-radius: 8px;
    }
    
    .cassette-img {
      width: 192px;
      height: 128px;
      object-fit: contain;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full w-full m-0 p-0 overflow-hidden"
      style="
        background-image: url('img/bg.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      ">
<!-- 
  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
  ‚ïë  üñºÔ∏è H∆Ø·ªöNG D·∫™N TH√äM ·∫¢NH - T√¨m v√† thay URL v√†o src=""         ‚ïë
  ‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
  ‚ïë  IMG_BG      = ·∫¢nh n·ªÅn to√†n trang (1920x1080)               ‚ïë
  ‚ïë  IMG_TITLE   = ·∫¢nh title bar b√™n tr√°i (96x32)               ‚ïë
  ‚ïë  IMG_ICON1   = Icon tr√≤n 1 (28x28)                          ‚ïë
  ‚ïë  IMG_ICON2   = Icon tr√≤n 2 (28x28)                          ‚ïë
  ‚ïë  IMG_ICON3   = Icon tr√≤n 3 / n√∫t X (28x28)                  ‚ïë
  ‚ïë  IMG_MAIN    = GIF ch√≠nh trang 1 (400x176)                  ‚ïë
  ‚ïë  IMG_CAT     = GIF m√®o trang 2 (112x144)                    ‚ïë
  ‚ïë  IMG_NOTE_BG = ·∫¢nh n·ªÅn gi·∫•y note (200x144)                  ‚ïë
  ‚ïë  IMG_HEADER  = ·∫¢nh ƒë·∫ßu th∆∞ trang 3 (400x128)                ‚ïë
  ‚ïë  IMG_ILLUST  = ·∫¢nh minh h·ªça cu·ªëi trang 3 (400x144)          ‚ïë
  ‚ïë  IMG_PHOTO1  = ·∫¢nh khung 1 trang 4 (128x160)                ‚ïë
  ‚ïë  IMG_PHOTO2  = ·∫¢nh khung 2 trang 4 (128x160)                ‚ïë
  ‚ïë  IMG_CASSET  = ·∫¢nh cassette tƒ©nh (192x128)                  ‚ïë
  ‚ïë  IMG_CASSET_PLAY = GIF cassette ƒëang ch·∫°y (192x128)         ‚ïë
  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
  --> <!-- Mini Game Overlay -->
  <div id="mini-gift-overlay" class="mini-gift-overlay" onclick="closeMiniGame()"></div>
  <div id="mini-gift-box" class="mini-gift-box">
   <div id="game-intro">
    <p class="text-lg font-bold mb-3" style="color: #c48b8b;">üéÆ Tr√≤ ch∆°i nh·ªè</p>
    <p class="text-sm mb-4" style="color: #c48b8b;">B·∫Øt 10 tr√°i tim ƒë·ªÉ m·ªü kh√≥a qu√† sinh nh·∫≠t nh√©!</p><button onclick="startMiniGame()" class="main-btn">Ch∆°i n√†o~</button>
   </div>
   <div id="game-area" class="hidden">
    <div class="flex justify-between items-center mb-2">
     <p class="text-sm font-bold" style="color: #c48b8b;">üíï <span id="heart-count">0</span>/10</p>
     <p class="text-sm font-bold" style="color: #c48b8b;">‚è±Ô∏è <span id="game-timer">15</span>s</p>
    </div>
    <div id="game-canvas" class="relative w-full h-48 rounded-xl overflow-hidden" style="background: linear-gradient(180deg, #ffe8ed 0%, #ffd6e0 100%); border: 2px solid #c48b8b;">
     <div id="basket" class="absolute bottom-2 w-12 h-10 flex items-center justify-center text-2xl cursor-pointer select-none" style="left: calc(50% - 24px); transition: left 0.1s ease-out;">
      üß∫
     </div>
    </div>
    <p class="text-xs mt-2" style="color: #c48b8b;">Di chuy·ªÉn gi·ªè ƒë·ªÉ b·∫Øt tim~ üíï</p>
   </div>
   <div id="game-win" class="hidden">
    <p class="text-3xl mb-2">üéâ</p>
    <p class="text-lg font-bold mb-2" style="color: #c48b8b;">Tuy·ªát v·ªùi!</p>
    <p class="text-sm mb-4" style="color: #c48b8b;">B·∫°n ƒë√£ b·∫Øt ƒë∆∞·ª£c t·∫•t c·∫£ tr√°i tim~<br>
     Ch√∫c m·ª´ng sinh nh·∫≠t! üéÇüíï</p><button onclick="closeMiniGame()" class="main-btn">Ti·∫øp t·ª•c</button>
   </div>
   <div id="game-lose" class="hidden">
    <p class="text-3xl mb-2">üò¢</p>
    <p class="text-lg font-bold mb-2" style="color: #c48b8b;">H·∫øt gi·ªù r·ªìi~</p>
    <p class="text-sm mb-4" style="color: #c48b8b;">Th·ª≠ l·∫°i nh√©, m√¨nh tin b·∫°n l√†m ƒë∆∞·ª£c! üí™</p>
    <div class="flex gap-2 justify-center"><button onclick="startMiniGame()" class="main-btn">Th·ª≠ l·∫°i</button> <button onclick="skipGame()" class="back-btn">B·ªè qua</button>
    </div>
   </div><button onclick="closeMiniGame()" class="back-btn mt-4" id="close-game-btn">ƒê√≥ng</button>
  </div><!-- ==================== PAGE 1 - L·ªùi ch√†o ==================== -->
  <main id="page1" class="page active">
   <div class="card-wrapper">
    <div class="title-bar"><!-- IMG_TITLE: ·∫¢nh title bar (96x32) --> <img src="img\t_trai.gif" alt="Title decoration" class="title-img" onerror="this.style.display='none'">
     <div class="flex gap-2"><!-- IMG_ICON1: Icon 1 (28x28) --> <img src="img\icon_1.png" alt="Icon 1" class="icon-img" onerror="this.style.display='none'"> <!-- IMG_ICON2: Icon 2 (28x28) --> <img src="img\icon_2.png" alt="Icon 2" class="icon-img" onerror="this.style.display='none'"> <!-- IMG_ICON3: Icon X (28x28) --> <img src="img\icon_3.png" alt="Icon 3" class="icon-img" onerror="this.style.display='none'">
     </div>
    </div>
    <div class="p-5">
     <div class="mb-4">
      <h1 id="page1-greeting" class="text-xl font-bold text-primary text-center mb-4">Helluu b·∫°n iu!</h1><!-- IMG_MAIN: GIF ch√≠nh trang 1 (400x176) -->
      <div class="float-animation flex justify-center"><img src="img\3.png" alt="Main GIF" class="main-gif" onerror="this.src=''; this.alt='GIF ch√≠nh trang 1'">
      </div>
     </div>
     <div class="mb-4">
      <p id="page1-message" class="text-primary text-center leading-relaxed text-xl font-bold">Always be happy & pretty, yeah ?</p>
     </div>
     <div class="text-center mb-3"><button onclick="goToPage(2)" class="main-btn">okay</button>
     </div>
     <p class="text-center text-sm" style="color: #c0c0c0; font-weight: 300; letter-spacing: 0.5px;">( Made with Ens )</p>
    </div>
   </div>
  </main><!-- ==================== PAGE 2 - Menu ==================== -->
  <main id="page2" class="page">
   <div class="card-wrapper">
    <div class="title-bar"><!-- IMG_TITLE: ·∫¢nh title bar (96x32) - d√πng chung --> <img src="img\t_trai.gif" alt="Title decoration" class="title-img" onerror="this.style.display='none'">
     <div class="flex gap-2 items-center"><img src="img\icon_1.png" alt="Icon 1" class="icon-img" onerror="this.style.display='none'"> <img src="img\icon_2.png" alt="Icon 2" class="icon-img" onerror="this.style.display='none'"> <img src="img\icon_3.png" alt="Back" class="icon-img cursor-pointer hover:scale-110 transition-transform" onclick="goToPage(1)" onerror="this.outerHTML='<span class=\'text-xl cursor-pointer\' onclick=\'goToPage(1)\'>‚úï</span>'">
     </div>
    </div>
    <div class="p-5">
     <div class="content-box mb-4">
      <div class="flex gap-4"><!-- IMG_CAT: GIF m√®o (112x144) -->
       <div class="bounce-animation flex-shrink-0"><img src="img\2.png" alt="Cat GIF" class="cat-gif" onerror="this.src=''; this.alt='GIF m√®o'">
       </div>
       <div class="note-layer flex-1"><!-- IMG_NOTE_BG: ·∫¢nh n·ªÅn gi·∫•y note (200x144) - optional --> <img src="" alt="" class="note-bg" onerror="this.style.display='none'">
        <div class="note-text">
         <p id="page2-note" class="text-primary font-medium text-xs leading-relaxed ">H√£y nh·ªõ ngh·ªâ ng∆°i v√† ƒÉn u·ªëng ƒë·ªÅu ƒë·∫∑n nh√©.<br><br>
           D√π c√≥ b·∫≠n r·ªôn ƒë·∫øn ƒë√¢u, s·ª©c kh·ªèe v·∫´n lu√¥n l√† ƒëi·ªÅu quan tr·ªçng nh·∫•t</p>
        </div>
       </div>
      </div>
     </div>
     <div class="divider-placeholder my-4">
      <div class="w-full h-0.5 bg-gradient-to-r from-transparent via-pink-300 to-transparent"></div>
     </div>
     <div class="flex justify-center gap-3"><button onclick="showMiniGiftAndGo(3)" class="pill-btn text-xs">Note</button> <button onclick="showMiniGiftAndGo(4)" class="pill-btn text-xs">Pict</button> <button onclick="showMiniGiftAndGo(5)" class="pill-btn text-xs">Kaseta</button>
     </div>
     <p class="text-center text-sm mt-3" style="color: #c0c0c0; font-weight: 300; letter-spacing: 0.5px;">(  Made with Ens )</p>
    </div>
   </div>
  </main><!-- ==================== PAGE 3 - L·ªùi nh·∫Øn ==================== -->
  <main id="page3" class="page">
   <div class="card-wrapper">
    <div class="title-bar"><img src="img\t_trai.gif" alt="Title decoration" class="title-img" onerror="this.style.display='none'">
     <div class="flex gap-2 items-center"><img src="img\icon_1.png" alt="Icon 1" class="icon-img" onerror="this.style.display='none'"> <img src="img\icon_2.png" alt="Icon 2" class="icon-img" onerror="this.style.display='none'"> <img src="img\icon_3.png" alt="Back" class="icon-img cursor-pointer hover:scale-110 transition-transform" onclick="goToPage(2)" onerror="this.outerHTML='<span class=\'text-xl cursor-pointer\' onclick=\'goToPage(2)\'>‚úï</span>'">
     </div>
    </div>
    <div class="p-5"><!-- IMG_HEADER: ·∫¢nh ƒë·∫ßu th∆∞ (400x128) -->
     <div class="mb-4 flex justify-center"><img src="img\11.png" alt="Header image" class="header-img" onerror="this.src=''; this.alt='·∫¢nh ƒë·∫ßu th∆∞'">
     </div>
     <div id="letter-container" class="leading-loose text-lg mb-4" style="font-family: 'Baloo 2', cursive, sans-serif; color: #c48b8b;">
      <p class="typing-line mb-2" data-text="M√¨nh mong v≈© tr·ª• s·∫Ω ƒë·ªëi x·ª≠ th·∫≠t d·ªãu d√†ng v·ªõi b·∫°n."></p>
      <p class="typing-line mb-2" data-text="Mong b·∫°n h·∫°nh ph√∫c h∆°n, ki√™n nh·∫´n h∆°n,"></p>
      <p class="typing-line mb-2" data-text="v√¨ b·∫°n x·ª©ng ƒë√°ng v·ªõi nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp. üíï"></p>
     </div><!-- IMG_ILLUST: ·∫¢nh minh h·ªça cu·ªëi (400x144) -->
     <div class="mb-3 flex justify-center"><img src="img\21.png" alt="Illustration" class="illustration-img" onerror="this.src=''; this.alt='·∫¢nh minh h·ªça'">
     </div>
     <p id="letter-wish" class="text-center font-bold text-base" style="font-family: 'Baloo 2', cursive, sans-serif; color: #c48b8b;">Happy Birthday Trang!</p>
    </div>
   </div>
  </main><!-- ==================== PAGE 4 - ·∫¢nh ch√∫c ==================== -->
  <main id="page4" class="page">
   <div class="card-wrapper">
    <div class="title-bar"><img src="img\t_trai.gif" alt="Title decoration" class="title-img" onerror="this.style.display='none'">
     <div class="flex gap-2 items-center"><img src="img/icon_1.png" alt="Icon 1" class="icon-img" onerror="this.style.display='none'"> <img src="img/icon_2.png" alt="Icon 2" class="icon-img" onerror="this.style.display='none'"> <img src="img/icon_3.png" alt="Back" class="icon-img cursor-pointer hover:scale-110 transition-transform" onclick="goToPage(2)" onerror="this.outerHTML='<span class=\'text-xl cursor-pointer\' onclick=\'goToPage(2)\'>‚úï</span>'">
     </div>
    </div>
    <div class="p-5 relative" id="photo-page-content">
     <div id="floating-hearts-container" class="absolute inset-0 pointer-events-none overflow-hidden z-20"></div>
     <div class="mb-4 relative z-10">
      <div class="flex justify-center gap-4 mb-4"><!-- IMG_PHOTO1: ·∫¢nh khung 1 (128x160) -->
       <div class="photo-frame transform -rotate-2"><img src="img\13f7596e9b7914274d68.jpg" alt="Photo 1" class="photo-img" onerror="this.src=''; this.alt='·∫¢nh 1'">
       </div><!-- IMG_PHOTO2: ·∫¢nh khung 2 (128x160) -->
       <div class="photo-frame transform rotate-2"><img src="img\1af885854992c6cc9f83.jpg" alt="Photo 2" class="photo-img" onerror="this.src=''; this.alt='·∫¢nh 2'">
       </div>
      </div>
      <p id="photo-caption" class="text-primary text-center font-semibold text-sm">Nh·ªØng kho·∫£nh kh·∫Øc ƒë√°ng nh·ªõ c·ªßa ch√∫ng m√¨nh üíï<br>
        Hy v·ªçng s·∫Ω c√≥ th√™m nhi·ªÅu k·ª∑ ni·ªám n·ªØa~</p>
     </div>
    </div>
   </div>
  </main><!-- ==================== PAGE 5 - Kaseta ==================== -->
  <main id="page5" class="page">
   <div class="card-wrapper">
    <div class="title-bar"><img src="img/t_trai.gif" alt="Title decoration" class="title-img" onerror="this.style.display='none'">
     <div class="flex gap-2 items-center"><img src="img/icon_1.png" alt="Icon 1" class="icon-img" onerror="this.style.display='none'"> <img src="img/icon_2.png" alt="Icon 2" class="icon-img" onerror="this.style.display='none'"> <img src="img/icon_3.png" alt="Back" class="icon-img cursor-pointer hover:scale-110 transition-transform" onclick="goToPage(2)" onerror="this.outerHTML='<span class=\'text-xl cursor-pointer\' onclick=\'goToPage(2)\'>‚úï</span>'">
     </div>
    </div>
    <div class="p-5">
     <div class="content-box mb-4">
      <p id="music-note" class="text-center font-semibold text-sm mb-4" style="color: #c48b8b;">M·ªôt b·∫£n nh·∫°c d√†nh ri√™ng cho b·∫°n~</p><!-- IMG_CASSET: ·∫¢nh cassette tƒ©nh (192x128) --> <!-- IMG_CASSET_PLAY: GIF cassette ƒëang ch·∫°y (192x128) -->
      <div class="cassette-container mx-auto w-48 h-32 mb-4 flex justify-center" onclick="toggleMusic()"><img id="cassette-static" src="img/1111.png" alt="Cassette" class="cassette-img" onerror="this.src=''; this.alt='Cassette'"> <img id="cassette-playing" src="img/1111.png" alt="Cassette playing" class="cassette-img hidden" onerror="this.src=''; this.alt='Cassette playing'">
      </div>
      <p id="music-instruction" class="text-center text-sm" style="color: #c48b8b;">Nh·∫•n v√†o bƒÉng ƒë·ªÉ nghe nh·∫°c</p>
     </div>
     <p class="text-center leading-relaxed text-sm" style="color: #c48b8b;">Hy v·ªçng √¢m nh·∫°c s·∫Ω l√†m ng√†y sinh nh·∫≠t n√†y c·ªßa b·∫°n th√™m d·ªãu d√†ng v√† ·∫•m √°p üíï</p>
    </div>
   </div>
   <audio id="bg-music" preload="auto">
      <source src="music/hpbd.m4a" type="audio/mp4">
      Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ audio.
    </audio>
  </main>
  <script>
    const defaultConfig = {
      page1_greeting: 'Helluu b·∫°n iu! üíï',
      page1_message: 'Happy birthday ~ üíó',
      page2_note: 'H√£y nh·ªõ ngh·ªâ ng∆°i v√† ƒÉn u·ªëng ƒë·ªÅu ƒë·∫∑n nh√©.\n\nD√π c√≥ b·∫≠n r·ªôn ƒë·∫øn ƒë√¢u, s·ª©c kh·ªèe v·∫´n lu√¥n l√† ƒëi·ªÅu quan tr·ªçng nh·∫•t üíó',
      letter_content: 'M√¨nh mong v≈© tr·ª• s·∫Ω ƒë·ªëi x·ª≠ th·∫≠t d·ªãu d√†ng v·ªõi b·∫°n.\nMong b·∫°n h·∫°nh ph√∫c h∆°n, ki√™n nh·∫´n h∆°n,\nv√¨ b·∫°n x·ª©ng ƒë√°ng v·ªõi nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp. üíï',
      photo_caption: 'Nh·ªØng kho·∫£nh kh·∫Øc ƒë√°ng nh·ªõ c·ªßa ch√∫ng m√¨nh üíï\nHy v·ªçng s·∫Ω c√≥ th√™m nhi·ªÅu k·ª∑ ni·ªám n·ªØa~',
      music_note: 'üéµ M·ªôt b·∫£n nh·∫°c d√†nh ri√™ng cho b·∫°n~',
      background_color: '#faf6f0',
      card_color: '#fffef9',
      text_color: '#e8a0aa',
      accent_color: '#c48b8b',
      button_color: '#f8a4b8',
      font_family: 'Baloo 2'
    };

    let currentPage = 1;
    let miniGameShown = false;
    let miniGameWon = false;
    let typingStarted = false;
    let heartCount = 0;
    let gameTimer = 15;
    let gameInterval = null;
    let spawnInterval = null;
    let targetPage = null;

    // üéµ LINK NH·∫†C - Thay URL playlist lofi birthday v√†o ƒë√¢y
    const MUSIC_LINK = "music/hpbd.m4a"; // Lofi Girl

    function goToPage(pageNum) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(`page${pageNum}`).classList.add('active');
      currentPage = pageNum;
      
      if (pageNum === 3 && !typingStarted) {
        startTypingAnimation();
        typingStarted = true;
      }
      
      if (pageNum === 4) {
        startFloatingHearts();
      }

      if (currentPage === 5 && pageNum !== 5) {
        const audio = document.getElementById('bg-music');
        if (audio) {
          audio.pause();
          audio.currentTime = 0;
          isPlaying = false;

          document.getElementById('cassette-playing').classList.add('hidden');
          document.getElementById('cassette-static').classList.remove('hidden');
          document.getElementById('music-instruction').textContent =
            'Nh·∫•n v√†o bƒÉng ƒë·ªÉ nghe nh·∫°c';
        }
      }
    }

    function showMiniGiftAndGo(page) {
      targetPage = page;
      if (!miniGameShown || !miniGameWon) {
        document.getElementById('mini-gift-overlay').classList.add('show');
        document.getElementById('mini-gift-box').classList.add('show');
        if (!miniGameWon) {
          resetGameUI();
        }
      } else {
        goToPage(page);
      }
    }

    function resetGameUI() {
      document.getElementById('game-intro').classList.remove('hidden');
      document.getElementById('game-area').classList.add('hidden');
      document.getElementById('game-win').classList.add('hidden');
      document.getElementById('game-lose').classList.add('hidden');
      document.getElementById('close-game-btn').classList.remove('hidden');
    }

    function startMiniGame() {
      miniGameShown = true;
      heartCount = 0;
      gameTimer = 15;
      
      document.getElementById('game-intro').classList.add('hidden');
      document.getElementById('game-win').classList.add('hidden');
      document.getElementById('game-lose').classList.add('hidden');
      document.getElementById('game-area').classList.remove('hidden');
      document.getElementById('close-game-btn').classList.add('hidden');
      document.getElementById('heart-count').textContent = '0';
      document.getElementById('game-timer').textContent = '15';
      
      const canvas = document.getElementById('game-canvas');
      canvas.querySelectorAll('.falling-heart').forEach(h => h.remove());
      
      const basket = document.getElementById('basket');
      basket.style.left = 'calc(50% - 24px)';
      
      gameInterval = setInterval(() => {
        gameTimer--;
        document.getElementById('game-timer').textContent = gameTimer;
        if (gameTimer <= 0) {
          endGame(false);
        }
      }, 1000);
      
      spawnInterval = setInterval(spawnHeart, 600);
      setupGameControls();
    }

    function spawnHeart() {
      const canvas = document.getElementById('game-canvas');
      const heart = document.createElement('div');
      heart.className = 'falling-heart';
      heart.textContent = ['üíï', 'üíó', 'üíñ', '‚ù§Ô∏è'][Math.floor(Math.random() * 4)];
      heart.style.cssText = `
        position: absolute;
        top: -30px;
        left: ${10 + Math.random() * 80}%;
        font-size: 24px;
        transition: top 0.05s linear;
        z-index: 10;
        pointer-events: none;
      `;
      canvas.appendChild(heart);
      
      let posY = -30;
      const speed = 3 + Math.random() * 2;
      
      const fall = setInterval(() => {
        posY += speed;
        heart.style.top = posY + 'px';
        
        const basket = document.getElementById('basket');
        const basketRect = basket.getBoundingClientRect();
        const heartRect = heart.getBoundingClientRect();
        
        if (heartRect.bottom >= basketRect.top && 
            heartRect.top <= basketRect.bottom &&
            heartRect.left < basketRect.right && 
            heartRect.right > basketRect.left) {
          clearInterval(fall);
          heart.remove();
          heartCount++;
          document.getElementById('heart-count').textContent = heartCount;
          
          if (heartCount >= 10) {
            endGame(true);
          }
        }
        
        if (posY > 200) {
          clearInterval(fall);
          heart.remove();
        }
      }, 30);
    }

    function setupGameControls() {
      const canvas = document.getElementById('game-canvas');
      const basket = document.getElementById('basket');
      
      const moveBasket = (clientX) => {
        const rect = canvas.getBoundingClientRect();
        let x = clientX - rect.left - 24;
        x = Math.max(0, Math.min(x, rect.width - 48));
        basket.style.left = x + 'px';
      };
      
      canvas.ontouchmove = (e) => {
        e.preventDefault();
        moveBasket(e.touches[0].clientX);
      };
      
      canvas.onmousemove = (e) => {
        moveBasket(e.clientX);
      };
    }

    function endGame(won) {
      clearInterval(gameInterval);
      clearInterval(spawnInterval);
      
      const canvas = document.getElementById('game-canvas');
      canvas.querySelectorAll('.falling-heart').forEach(h => h.remove());
      
      document.getElementById('game-area').classList.add('hidden');
      
      if (won) {
        miniGameWon = true;
        document.getElementById('game-win').classList.remove('hidden');
        document.getElementById('close-game-btn').classList.add('hidden');
      } else {
        document.getElementById('game-lose').classList.remove('hidden');
        document.getElementById('close-game-btn').classList.add('hidden');
      }
    }

    function closeMiniGame() {
      clearInterval(gameInterval);
      clearInterval(spawnInterval);
      
      document.getElementById('mini-gift-overlay').classList.remove('show');
      document.getElementById('mini-gift-box').classList.remove('show');
      
      if (miniGameWon && targetPage) {
        setTimeout(() => goToPage(targetPage), 300);
      }
    }

    function skipGame() {
      miniGameWon = true;
      closeMiniGame();
      if (targetPage) {
        setTimeout(() => goToPage(targetPage), 300);
      }
    }

    function startTypingAnimation() {
      const lines = document.querySelectorAll('.typing-line');
      let delay = 0;
      
      lines.forEach((line) => {
        const text = line.dataset.text;
        line.textContent = '';
        line.style.opacity = '0';
        
        setTimeout(() => {
          line.style.opacity = '1';
          let charIndex = 0;
          
          const typeChar = () => {
            if (charIndex < text.length) {
              line.textContent += text[charIndex];
              charIndex++;
              setTimeout(typeChar, 50);
            }
          };
          
          typeChar();
        }, delay);
        
        delay += text.length * 50 + 500;
      });
    }

    function startFloatingHearts() {
      const container = document.getElementById('floating-hearts-container');
      const hearts = ['üíï', 'üíó', 'üíñ', '‚ù§Ô∏è'];
      
      for (let i = 0; i < 15; i++) {
        setTimeout(() => {
          createHeart(container, hearts);
        }, i * 300);
      }
      
      setInterval(() => {
        if (currentPage === 4) {
          createHeart(container, hearts);
        }
      }, 800);
    }

    function createHeart(container, hearts) {
      const heart = document.createElement('span');
      heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
      heart.className = 'heart-particle';
      heart.style.cssText = `
        left: ${Math.random() * 100}%;
        bottom: 0;
        font-size: ${14 + Math.random() * 14}px;
        --drift: ${(Math.random() - 0.5) * 60}px;
      `;
      container.appendChild(heart);
      setTimeout(() => heart.remove(), 4000);
    }

    let isPlaying = false;

    function toggleMusic() {
      const audio = document.getElementById('bg-music');
      const staticImg = document.getElementById('cassette-static');
      const playingImg = document.getElementById('cassette-playing');
      const text = document.getElementById('music-instruction');

      if (!audio) return;

      if (!isPlaying) {
        audio.play();
        isPlaying = true;

        staticImg.classList.add('hidden');
        playingImg.classList.remove('hidden');
        text.textContent = 'ƒêang ph√°t nh·∫°c~ üé∂';
      } else {
        audio.pause();
        isPlaying = false;

        playingImg.classList.add('hidden');
        staticImg.classList.remove('hidden');
        text.textContent = 'Nh·∫•n v√†o bƒÉng ƒë·ªÉ nghe nh·∫°c';
      }
    }


    async function onConfigChange(config) {
      const fontFamily = config.font_family || defaultConfig.font_family;
      document.body.style.fontFamily = `${fontFamily}, cursive, sans-serif`;
      
      const bgColor = config.background_color || defaultConfig.background_color;
      document.body.style.background = `linear-gradient(135deg, ${bgColor} 0%, #ffe8ed 50%, #ffd6e0 100%)`;
      
      const textColor = config.text_color || defaultConfig.text_color;
      document.querySelectorAll('.text-primary').forEach(el => {
        el.style.color = textColor;
      });
      
      const el1 = document.getElementById('page1-greeting');
      if (el1) el1.textContent = config.page1_greeting || defaultConfig.page1_greeting;
      
      const el2 = document.getElementById('page1-message');
      if (el2) el2.innerHTML = (config.page1_message || defaultConfig.page1_message).replace(/\n/g, '<br>');
      
      const el3 = document.getElementById('page2-note');
      if (el3) el3.innerHTML = (config.page2_note || defaultConfig.page2_note).replace(/\n/g, '<br>');
      
      const el4 = document.getElementById('photo-caption');
      if (el4) el4.innerHTML = (config.photo_caption || defaultConfig.photo_caption).replace(/\n/g, '<br>');
      
      const el5 = document.getElementById('music-note');
      if (el5) el5.textContent = config.music_note || defaultConfig.music_note;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => { config.background_color = value; window.elementSdk.setConfig({ background_color: value }); }
          },
          {
            get: () => config.card_color || defaultConfig.card_color,
            set: (value) => { config.card_color = value; window.elementSdk.setConfig({ card_color: value }); }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => { config.text_color = value; window.elementSdk.setConfig({ text_color: value }); }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => { config.accent_color = value; window.elementSdk.setConfig({ accent_color: value }); }
          },
          {
            get: () => config.button_color || defaultConfig.button_color,
            set: (value) => { config.button_color = value; window.elementSdk.setConfig({ button_color: value }); }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => { config.font_family = value; window.elementSdk.setConfig({ font_family: value }); }
        },
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['page1_greeting', config.page1_greeting || defaultConfig.page1_greeting],
        ['page1_message', config.page1_message || defaultConfig.page1_message],
        ['page2_note', config.page2_note || defaultConfig.page2_note],
        ['letter_content', config.letter_content || defaultConfig.letter_content],
        ['photo_caption', config.photo_caption || defaultConfig.photo_caption],
        ['music_note', config.music_note || defaultConfig.music_note]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9afbc7b27333079e',t:'MTc2NjAzMDcwNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
